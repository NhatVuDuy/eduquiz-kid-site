import{u as C,j as t,s as N}from"./index--ILSzZaw.js";import{r}from"./animation-vendor-B6fZrcjP.js";import{u as L}from"./levelStore-XI9ZHSFN.js";import{a as k}from"./levelService-DPZIrGbv.js";import{b as E,f as o,a as B}from"./numberFormat-tpWeNAYq.js";import{H as w}from"./Header-DyyfoM7s.js";import{S as n}from"./ScreenContainer-21a-fcYA.js";import{S as R}from"./SubjectCard-D_FbafxL.js";import{B as m}from"./BackButton-BDaTWkU4.js";import"./react-vendor-labSKdyf.js";import"./ui-vendor-B8QmJS74.js";import"./level-DpoHUSSg.js";import"./Button-Bl6cuHxx.js";import"./Card-BK5bYxKM.js";const J=()=>{const{goToNext:l}=C(),{currentLevel:s,setCurrentSubject:x}=L(),[S,p]=r.useState([]),[j,u]=r.useState(!0),[f,b]=r.useState({}),[c,d]=r.useState(!0);r.useEffect(()=>{s&&(g(),h(s.id))},[s]);const g=async()=>{try{u(!0);const e=await k(s.id);p(e)}catch(e){console.error("Error loading subjects:",e)}finally{u(!1)}},h=async e=>{try{d(!0);const a=await E(e);b(a||{})}catch(a){console.error("Error loading subject stats:",a)}finally{d(!1)}},v=e=>{N.playClick(),x(e),l("quizTypeSelect")};return s?j?t.jsx(n,{className:"flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4 animate-spin",children:"⏳"}),t.jsx("p",{className:"text-xl text-gray-600",children:"Đang tải môn học..."})]})}):t.jsxs(n,{children:[t.jsx(m,{inline:!0,variant:"ghost",label:"← Quay lại",onClick:()=>l("levelSelect"),className:"mb-2"}),t.jsx(w,{title:"Chọn môn học",subtitle:`Cấp độ: ${s.name}`,titleClassName:"text-4xl"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:S.map((e,a)=>{const i=f[e.id]||{},y=[{label:"Bài test",value:c?"…":o(i.quizCount)},{label:"Lượt làm",value:c?"…":o(i.totalUsage)},{label:"Người học",value:c?"…":o(i.playerCount)},{label:"Đánh giá",value:c?"…":B(i.averageRating)}];return t.jsx(R,{icon:e.icon,title:e.name,description:e.description||"",onClick:()=>v(e),delay:a*.1,stats:y},e.id)})}),t.jsx("div",{className:"mt-8 text-center",children:t.jsx(m,{onClick:()=>l("levelSelect"),label:"← Quay lại"})})]}):t.jsx(n,{className:"flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Chưa chọn cấp độ!"}),t.jsx(m,{onClick:()=>l("levelSelect")})]})})};export{J as SubjectSelectScreen};
//# sourceMappingURL=SubjectSelectScreen-Chn3aMFv.js.map
