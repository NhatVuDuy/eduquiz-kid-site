{"version":3,"file":"userService-B-l4Ujv9.js","sources":["../../src/services/userService.js"],"sourcesContent":["/**\n * User Service\n * Quản lý thông tin người dùng và role\n */\n\nimport { savePlayer, getAllPlayers } from './storageService.js';\n\n/**\n * User Roles\n */\nexport const USER_ROLES = {\n  STUDENT: 'student',      // Học sinh\n  PARENT: 'parent',        // Phụ huynh\n  TEACHER: 'teacher',      // Giáo viên\n  ADMIN: 'admin',          // Quản trị viên\n};\n\n/**\n * Check if user is admin\n * @param {Object} user - User object\n * @returns {boolean}\n */\nexport const isAdmin = (user) => {\n  return user?.role === USER_ROLES.ADMIN;\n};\n\n/**\n * Check if user can create quizzes\n * @param {Object} user - User object\n * @returns {boolean}\n */\nexport const canCreateQuiz = (user) => {\n  return user?.role === USER_ROLES.ADMIN || \n         user?.role === USER_ROLES.PARENT || \n         user?.role === USER_ROLES.TEACHER;\n};\n\n/**\n * Get current user (from player store)\n * @param {Object} currentPlayer - Current player from store\n * @returns {Object} User object with role\n */\nexport const getCurrentUser = (currentPlayer) => {\n  if (!currentPlayer) return null;\n  \n  // Default role là PARENT (có thể tạo quiz)\n  // TODO: Load role từ database hoặc config\n  return {\n    id: currentPlayer.id,\n    name: currentPlayer.name,\n    avatar: currentPlayer.avatar,\n    role: currentPlayer.role || USER_ROLES.PARENT,\n    email: currentPlayer.email || null,\n  };\n};\n\n/**\n * Update user role\n * @param {string} userId - User ID\n * @param {string} role - New role\n * @returns {Promise<void>}\n */\nexport const updateUserRole = async (userId, role) => {\n  try {\n    const players = await getAllPlayers();\n    const user = players.find(p => p.id === userId);\n    \n    if (user) {\n      user.role = role;\n      await savePlayer(user);\n    }\n  } catch (error) {\n    console.error('Error updating user role:', error);\n    throw error;\n  }\n};\n\n"],"names":["USER_ROLES","canCreateQuiz","user","getCurrentUser","currentPlayer"],"mappings":"4BAUY,MAACA,EAAa,CACxB,QAAS,UACT,OAAQ,SACR,QAAS,UACT,MAAO,OACT,EAgBaC,EAAiBC,GACrBA,GAAM,OAASF,EAAW,OAC1BE,GAAM,OAASF,EAAW,QAC1BE,GAAM,OAASF,EAAW,QAQtBG,EAAkBC,GACxBA,EAIE,CACL,GAAIA,EAAc,GAClB,KAAMA,EAAc,KACpB,OAAQA,EAAc,OACtB,KAAMA,EAAc,MAAQJ,EAAW,OACvC,MAAOI,EAAc,OAAS,IAClC,EAV6B"}