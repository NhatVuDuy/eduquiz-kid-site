import{u as z,j as s,s as L}from"./index--ILSzZaw.js";import{r as t}from"./animation-vendor-B6fZrcjP.js";import{u as T}from"./levelStore-XI9ZHSFN.js";import{l as E,a as F}from"./levelService-DPZIrGbv.js";import{QUIZ_TYPES as B,getQuizTypeMetadata as Q}from"./level-DpoHUSSg.js";import{C as u}from"./Card-BK5bYxKM.js";import{B as h}from"./Button-Bl6cuHxx.js";import{H as w}from"./Header-DyyfoM7s.js";import{S as j}from"./ScreenContainer-21a-fcYA.js";import{B as p}from"./BackButton-BDaTWkU4.js";import{O as i}from"./OptionButton-CxVbMwJ3.js";import"./react-vendor-labSKdyf.js";import"./ui-vendor-B8QmJS74.js";const G=()=>{const{goToNext:a}=z(),{setFilterSubject:c,setFilterQuizType:r,filterSubject:o,filterQuizType:n,clearFilters:f}=T(),[g,b]=t.useState([]),[l,m]=t.useState(null),[d,x]=t.useState([]),[v,N]=t.useState(!0);t.useEffect(()=>{S()},[]),t.useEffect(()=>{l&&C()},[l]);const S=async()=>{try{const e=await E();b(e)}catch(e){console.error("Error loading levels:",e)}finally{N(!1)}},C=async()=>{try{const e=await F(l.id);x(e)}catch(e){console.error("Error loading subjects:",e)}},y=()=>{L.playClick(),a("quizList")},k=Object.values(B).map(e=>({...Q(e),id:e}));return v?s.jsx(j,{className:"flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4 animate-spin",children:"⏳"}),s.jsx("p",{className:"text-xl text-gray-600",children:"Đang tải..."})]})}):s.jsxs(j,{children:[s.jsx(p,{inline:!0,variant:"ghost",label:"← Quay lại",onClick:()=>a("home"),className:"mb-2"}),s.jsx(w,{title:"Lọc bài test",subtitle:"Chọn môn học hoặc loại bài test",titleClassName:"text-4xl"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(u,{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Lọc theo môn học"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chọn cấp độ:"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:g.slice(0,6).map(e=>s.jsx(i,{label:e.name,icon:e.icon,selected:l?.id===e.id,onClick:()=>m(e),size:"sm"},e.id))})]}),l&&d.length>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chọn môn:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(i,{label:"Tất cả môn",selected:!o,onClick:()=>c(null),size:"sm"}),d.map(e=>s.jsx(i,{label:e.name,icon:e.icon,selected:o===e.id,onClick:()=>c(e.id),size:"sm"},e.id))]})]})]}),s.jsxs(u,{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Lọc theo loại"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx(i,{label:"Tất cả",selected:!n,onClick:()=>r(null),size:"sm"}),k.map(e=>s.jsx(i,{label:e.name,icon:e.icon,selected:n===e.id,onClick:()=>r(e.id),size:"sm"},e.id))]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(h,{onClick:y,variant:"primary",size:"lg",className:"flex-1",children:"Áp dụng bộ lọc"}),s.jsx(h,{onClick:()=>{f(),m(null),x([])},variant:"outline",size:"lg",children:"Xóa tất cả"})]})]}),s.jsx(p,{onClick:()=>a("home")})]})};export{G as QuizFilterScreen};
//# sourceMappingURL=QuizFilterScreen-xZ5DHtIR.js.map
