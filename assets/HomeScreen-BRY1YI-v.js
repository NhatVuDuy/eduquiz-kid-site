import{j as e,u as E,b as T,s as c}from"./index--ILSzZaw.js";import{m as l,A as M,r as p}from"./animation-vendor-B6fZrcjP.js";import{u as Q}from"./playerStore-r_j1nxA9.js";import{c as A,S as h}from"./badgeService-DtuNOCm4.js";import{g as B,c as I,U as m}from"./userService-B-l4Ujv9.js";import{H}from"./Header-DyyfoM7s.js";import{B as f,c as g}from"./Button-Bl6cuHxx.js";import{S as R}from"./ScreenContainer-21a-fcYA.js";import{C as F}from"./Card-BK5bYxKM.js";import"./react-vendor-labSKdyf.js";import"./ui-vendor-B8QmJS74.js";const y=({children:i,onClick:s,variant:a="primary",size:n="lg",delay:t=0,className:o="",...u})=>e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t},children:e.jsx(f,{onClick:s,variant:a,size:n,className:o,...u,children:i})}),O=({isOpen:i,onClose:s,items:a=[],className:n=""})=>e.jsx(M,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(l.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s}),e.jsxs(l.div,{className:g("fixed top-0 right-0 h-full w-80 max-w-[90vw] bg-white shadow-2xl z-50","flex flex-col",n),initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},children:[e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-primary-50 to-secondary-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Menu"}),e.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"ÄÃ³ng menu",children:e.jsx("span",{className:"text-2xl",children:"âœ•"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:a.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"KhÃ´ng cÃ³ má»¥c nÃ o"}):a.map((t,o)=>e.jsx(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:o*.05},children:e.jsx(F,{onClick:()=>{t.onClick&&(t.onClick(),s())},className:g("cursor-pointer transition-all",t.disabled&&"opacity-50 cursor-not-allowed"),hover:!t.disabled,children:e.jsxs("div",{className:"flex items-center space-x-4",children:[t.icon&&e.jsx("div",{className:"text-3xl",children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:t.title}),t.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.description})]}),t.badge&&e.jsx("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 rounded-full text-xs font-semibold",children:t.badge})]})})},t.id||o))}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsx(f,{onClick:s,variant:"outline",className:"w-full",children:"ÄÃ³ng"})})]})]})}),P=({onClick:i,className:s="",badge:a=null,...n})=>e.jsxs(l.button,{onClick:i,className:g("fixed bottom-6 right-6 z-30","w-14 h-14 rounded-full","bg-gradient-to-r from-primary-600 to-primary-700","text-white shadow-lg hover:shadow-xl","flex items-center justify-center","transition-all duration-300","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",s),whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Má»Ÿ menu",...n,children:[e.jsx(l.div,{className:"text-2xl",animate:{rotate:[0,10,-10,0]},transition:{duration:.5,repeat:1/0,repeatDelay:2},children:"â˜°"}),a&&e.jsx(l.span,{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs font-bold flex items-center justify-center",initial:{scale:0},animate:{scale:1},children:a})]}),W=()=>{const{goToNext:i}=E(),{currentPlayer:s}=Q(),[a,n]=p.useState(!1),[t,o]=p.useState({totalQuizzes:0,averageScore:0,highestScore:0});p.useEffect(()=>{s&&u()},[s]);const u=async()=>{try{const x=await T(s.id),z=A(x);o(z)}catch(x){console.error("Error loading stats:",x)}},j=()=>{c.playClick(),i("levelSelect")},b=()=>{c.playClick(),i("quizFilter")},v=()=>{c.playClick(),i("importQuiz")},C=()=>{c.playClick(),alert("TÃ­nh nÄƒng thá»‘ng kÃª Ä‘ang phÃ¡t triá»ƒn!")},N=()=>{c.playClick(),i("settings")},S=()=>{c.playClick(),n(!a)},k=()=>{n(!1)},r=B(s),w=I(r),d=[];return w&&d.push({id:"importQuiz",icon:"ğŸ“¥",title:"Táº¡o bÃ i test",description:"Import tá»« Google Sheet",onClick:v}),d.push({id:"stats",icon:"ğŸ“Š",title:"Xem thá»‘ng kÃª",description:"Xem káº¿t quáº£ há»c táº­p",onClick:C}),d.push({id:"settings",icon:"âš™ï¸",title:"CÃ i Ä‘áº·t",description:"CÃ i Ä‘áº·t á»©ng dá»¥ng",onClick:N}),r&&r.role!==m.STUDENT&&d.push({id:"role",icon:r.role===m.ADMIN?"ğŸ‘‘":r.role===m.TEACHER?"ğŸ‘©â€ğŸ«":"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§",title:`Vai trÃ²: ${r.role===m.ADMIN?"Quáº£n trá»‹ viÃªn":r.role===m.TEACHER?"GiÃ¡o viÃªn":"Phá»¥ huynh"}`,description:"ThÃ´ng tin tÃ i khoáº£n",onClick:null,disabled:!0}),e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsx(H,{title:`ğŸ‘‹ Xin chÃ o, ${s?.name||"Báº¡n"}!`,subtitle:"Sáºµn sÃ ng há»c táº­p chÆ°a?"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx(h,{icon:"ğŸ“š",value:t.totalQuizzes,label:"BÃ i Ä‘Ã£ lÃ m",valueColor:"text-primary-600"}),e.jsx(h,{icon:"â­",value:t.averageScore,label:"Äiá»ƒm trung bÃ¬nh",valueColor:"text-yellow-600"}),e.jsx(h,{icon:"ğŸ†",value:t.highestScore,label:"Äiá»ƒm cao nháº¥t",valueColor:"text-green-600"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(y,{onClick:j,variant:"primary",size:"lg",delay:.2,className:"w-full",children:"ğŸ® Báº¯t Ä‘áº§u lÃ m bÃ i"}),e.jsx(y,{onClick:b,variant:"outline",size:"lg",delay:.3,className:"w-full",children:"ğŸ” TÃ¬m kiáº¿m bÃ i test"})]})]}),e.jsx(P,{onClick:S}),e.jsx(O,{isOpen:a,onClose:k,items:d})]})};export{W as HomeScreen};
//# sourceMappingURL=HomeScreen-BRY1YI-v.js.map
