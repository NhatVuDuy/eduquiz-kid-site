import{u as b,j as e,s as y}from"./index--ILSzZaw.js";import{r as s}from"./animation-vendor-B6fZrcjP.js";import{u as C}from"./levelStore-XI9ZHSFN.js";import{l as N}from"./levelService-DPZIrGbv.js";import{g as k,f as o,a as E}from"./numberFormat-tpWeNAYq.js";import{H as B}from"./Header-DyyfoM7s.js";import{S as n}from"./ScreenContainer-21a-fcYA.js";import{S as w}from"./SubjectCard-D_FbafxL.js";import{B as c}from"./BackButton-BDaTWkU4.js";import"./react-vendor-labSKdyf.js";import"./ui-vendor-B8QmJS74.js";import"./level-DpoHUSSg.js";import"./Button-Bl6cuHxx.js";import"./Card-BK5bYxKM.js";const J=()=>{const{goToNext:l}=b(),{setCurrentLevel:m}=C(),[d,u]=s.useState([]),[p,x]=s.useState(!0),[g,f]=s.useState({}),[a,i]=s.useState(!0);s.useEffect(()=>{v(),h()},[]);const v=async()=>{try{const t=await N();u(t)}catch(t){console.error("Error loading levels:",t)}finally{x(!1)}},h=async()=>{try{i(!0);const t=await k();f(t||{})}catch(t){console.error("Error loading level stats:",t)}finally{i(!1)}},S=t=>{y.playClick(),m(t),l("subjectSelect")};return p?e.jsx(n,{className:"flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-spin",children:"⏳"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Đang tải..."})]})}):e.jsxs(n,{children:[e.jsx(c,{inline:!0,variant:"ghost",label:"← Quay lại",onClick:()=>l("home"),className:"mb-2"}),e.jsx(B,{title:"Chọn cấp độ",subtitle:"Chọn cấp độ phù hợp với bạn",titleClassName:"text-4xl"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:d.map((t,j)=>{const r=g[t.id]||{},L=[{label:"Bài test",value:a?"…":o(r.quizCount)},{label:"Lượt làm",value:a?"…":o(r.totalUsage)},{label:"Người học",value:a?"…":o(r.playerCount)},{label:"Đánh giá",value:a?"…":E(r.averageRating)}];return e.jsx(w,{icon:t.icon,title:t.name,description:t.description,onClick:()=>S(t),delay:j*.05,className:"h-full",stats:L},t.id)})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(c,{onClick:()=>l("home"),label:"← Quay lại"})})]})};export{J as LevelSelectScreen};
//# sourceMappingURL=LevelSelectScreen-CbpUwiNW.js.map
