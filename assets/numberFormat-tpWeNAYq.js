import{c as y,d as m}from"./index--ILSzZaw.js";const I=5*1e3;let l=null,p=0;const g=async()=>{const t=Date.now();if(l&&t-p<I)return l;const[n,a]=await Promise.all([y(),m()]),r=new Map;return a.forEach(e=>{e?.quizId&&(r.has(e.quizId)||r.set(e.quizId,[]),r.get(e.quizId).push(e))}),l={quizzes:n,resultIndex:r},p=t,l},c=()=>({quizCount:0,totalUsage:0,playerIds:new Set,ratingTotal:0,ratingVotes:0}),d=(t,n,a=[])=>{t.quizCount+=1,t.totalUsage+=n?.usageCount||0;const r=Number(n?.rating||0),e=Number(n?.ratingCount||0);e>0&&r>0?(t.ratingTotal+=r*e,t.ratingVotes+=e):r>0&&(t.ratingTotal+=r,t.ratingVotes+=1),a.forEach(s=>{s?.playerId&&t.playerIds.add(s.playerId)})},f=(t=c())=>({quizCount:t.quizCount,totalUsage:t.totalUsage,playerCount:t.playerIds.size,averageRating:t.ratingVotes>0?Number((t.ratingTotal/t.ratingVotes).toFixed(1)):0}),u=(t,n)=>t?.[n]||t?.[n==="quizType"?"group":n==="subjectId"?"subject":n==="levelId"?"level":n],C=async()=>{const{quizzes:t,resultIndex:n}=await g(),a={};return t.forEach(r=>{const e=u(r,"levelId");e&&(a[e]||(a[e]=c()),d(a[e],r,n.get(r.id)))}),Object.keys(a).reduce((r,e)=>(r[e]=f(a[e]),r),{})},S=async t=>{const{quizzes:n,resultIndex:a}=await g(),r={};return n.forEach(e=>{const s=u(e,"levelId");if(t&&s!==t)return;const o=u(e,"subjectId");o&&(r[o]||(r[o]=c()),d(r[o],e,a.get(e.id)))}),Object.keys(r).reduce((e,s)=>(e[s]=f(r[s]),e),{})},T=async(t,n)=>{const{quizzes:a,resultIndex:r}=await g(),e={};return a.forEach(s=>{const o=u(s,"levelId"),b=u(s,"subjectId");if(t&&o!==t||n&&b!==n)return;const i=u(s,"quizType");i&&(e[i]||(e[i]=c()),d(e[i],s,r.get(s.id)))}),Object.keys(e).reduce((s,o)=>(s[o]=f(e[o]),s),{})},h=t=>{const n=Number(t||0);return!Number.isFinite(n)||n===0?"0":n>=1e6?`${(n/1e6).toFixed(1).replace(/\.0$/,"")}M`:n>=1e3?`${(n/1e3).toFixed(1).replace(/\.0$/,"")}k`:n.toString()},j=t=>{const n=Number(t||0);return!Number.isFinite(n)||n<=0?"Chưa có":`${n.toFixed(1)}⭐`};export{j as a,S as b,T as c,h as f,C as g};
//# sourceMappingURL=numberFormat-tpWeNAYq.js.map
