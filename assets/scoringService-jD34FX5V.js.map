{"version":3,"file":"scoringService-jD34FX5V.js","sources":["../../src/services/scoringService.js"],"sourcesContent":["/**\n * Scoring Service\n * T√≠nh ƒëi·ªÉm theo 2 ch·∫ø ƒë·ªô: C∆° b·∫£n v√† Theo th·ªùi gian\n */\n\n/**\n * Ch·∫ø ƒë·ªô t√≠nh ƒëi·ªÉm: C∆° b·∫£n\n * M·ªói c√¢u ƒë√∫ng = 1 ƒëi·ªÉm, t·ªïng quy v·ªÅ 100\n * @param {number} correctAnswers - S·ªë c√¢u tr·∫£ l·ªùi ƒë√∫ng\n * @param {number} totalQuestions - T·ªïng s·ªë c√¢u h·ªèi\n * @returns {number} ƒêi·ªÉm t·ª´ 0-100\n */\nexport const calculateBasicScore = (correctAnswers, totalQuestions) => {\n  if (totalQuestions === 0) return 0;\n  return Math.round((correctAnswers / totalQuestions) * 100);\n};\n\n/**\n * Ch·∫ø ƒë·ªô t√≠nh ƒëi·ªÉm: Theo th·ªùi gian\n * ƒêi·ªÉm c√¢u = 100 / s·ªë c√¢u * (1 + th·ªùi gian c√≤n l·∫°i / th·ªùi gian t·ªëi ƒëa)\n * @param {Array<Object>} answers - M·∫£ng c√°c c√¢u tr·∫£ l·ªùi: [{ correct: boolean, timeRemaining: number, maxTime: number }]\n * @param {number} totalQuestions - T·ªïng s·ªë c√¢u h·ªèi\n * @returns {number} ƒêi·ªÉm t·ª´ 0-100\n */\nexport const calculateTimeBasedScore = (answers, totalQuestions) => {\n  if (totalQuestions === 0 || !answers || answers.length === 0) return 0;\n\n  let totalScore = 0;\n  const basePointsPerQuestion = 100 / totalQuestions;\n\n  answers.forEach((answer) => {\n    if (answer.correct) {\n      const timeBonus = answer.timeRemaining && answer.maxTime \n        ? answer.timeRemaining / answer.maxTime \n        : 0;\n      const questionScore = basePointsPerQuestion * (1 + timeBonus);\n      totalScore += questionScore;\n    }\n  });\n\n  // ƒê·∫£m b·∫£o ƒëi·ªÉm kh√¥ng v∆∞·ª£t qu√° 100\n  return Math.min(Math.round(totalScore), 100);\n};\n\n/**\n * T√≠nh ƒëi·ªÉm t·ªïng h·ª£p\n * @param {string} mode - Ch·∫ø ƒë·ªô t√≠nh ƒëi·ªÉm: 'basic' ho·∫∑c 'time'\n * @param {Object} data - D·ªØ li·ªáu: { correctAnswers, totalQuestions, answers }\n * @returns {number} ƒêi·ªÉm t·ª´ 0-100\n */\nexport const calculateScore = (mode, data) => {\n  const { correctAnswers, totalQuestions, answers } = data;\n\n  if (mode === 'time' && answers && answers.length > 0) {\n    return calculateTimeBasedScore(answers, totalQuestions);\n  }\n\n  return calculateBasicScore(correctAnswers || 0, totalQuestions || 0);\n};\n\n/**\n * X√°c ƒë·ªãnh m·ª©c ƒë·ªô ƒë√°nh gi√° d·ª±a tr√™n ƒëi·ªÉm s·ªë\n * @param {number} score - ƒêi·ªÉm t·ª´ 0-100\n * @returns {Object} { level: string, message: string, emoji: string }\n */\nexport const getScoreLevel = (score) => {\n  if (score >= 90) {\n    return {\n      level: 'excellent',\n      message: 'Xu·∫•t s·∫Øc!',\n      emoji: 'üåü',\n      color: 'text-green-600',\n    };\n  } else if (score >= 70) {\n    return {\n      level: 'good',\n      message: 'T·ªët l·∫Øm!',\n      emoji: 'üëç',\n      color: 'text-blue-600',\n    };\n  } else if (score >= 50) {\n    return {\n      level: 'average',\n      message: 'C·ªë g·∫Øng th√™m nh√©!',\n      emoji: 'üí™',\n      color: 'text-yellow-600',\n    };\n  } else {\n    return {\n      level: 'needs-improvement',\n      message: 'H·ªçc l·∫°i nh√©!',\n      emoji: 'üìö',\n      color: 'text-red-600',\n    };\n  }\n};\n\n"],"names":["calculateBasicScore","correctAnswers","totalQuestions","calculateTimeBasedScore","answers","totalScore","basePointsPerQuestion","answer","timeBonus","questionScore","calculateScore","mode","data","getScoreLevel","score"],"mappings":"AAYO,MAAMA,EAAsB,CAACC,EAAgBC,IAC9CA,IAAmB,EAAU,EAC1B,KAAK,MAAOD,EAAiBC,EAAkB,GAAG,EAU9CC,EAA0B,CAACC,EAASF,IAAmB,CAClE,GAAIA,IAAmB,GAAK,CAACE,GAAWA,EAAQ,SAAW,EAAG,MAAO,GAErE,IAAIC,EAAa,EACjB,MAAMC,EAAwB,IAAMJ,EAEpC,OAAAE,EAAQ,QAASG,GAAW,CAC1B,GAAIA,EAAO,QAAS,CAClB,MAAMC,EAAYD,EAAO,eAAiBA,EAAO,QAC7CA,EAAO,cAAgBA,EAAO,QAC9B,EACEE,EAAgBH,GAAyB,EAAIE,GACnDH,GAAcI,CAChB,CACF,CAAC,EAGM,KAAK,IAAI,KAAK,MAAMJ,CAAU,EAAG,GAAG,CAC7C,EAQaK,EAAiB,CAACC,EAAMC,IAAS,CAC5C,KAAM,CAAE,eAAAX,EAAgB,eAAAC,EAAgB,QAAAE,CAAO,EAAKQ,EAEpD,OAAID,IAAS,QAAUP,GAAWA,EAAQ,OAAS,EAC1CD,EAAwBC,EAASF,CAAc,EAGjDF,EAAoBC,GAAkB,EAAGC,GAAkB,CAAC,CACrE,EAOaW,EAAiBC,GACxBA,GAAS,GACJ,CACL,MAAO,YACP,QAAS,YACT,MAAO,KACP,MAAO,gBACb,EACaA,GAAS,GACX,CACL,MAAO,OACP,QAAS,WACT,MAAO,KACP,MAAO,eACb,EACaA,GAAS,GACX,CACL,MAAO,UACP,QAAS,oBACT,MAAO,KACP,MAAO,iBACb,EAEW,CACL,MAAO,oBACP,QAAS,eACT,MAAO,KACP,MAAO,cACb"}