{"version":3,"file":"badgeService-DtuNOCm4.js","sources":["../../src/components/screen/StatsCard.jsx","../../src/services/badgeService.js"],"sourcesContent":["import React from 'react';\nimport { Card } from '../Card';\nimport { cn } from '../../utils';\n\n/**\n * StatsCard Component\n * Reusable card for displaying statistics\n */\nexport const StatsCard = ({\n  icon,\n  value,\n  label,\n  valueColor = 'text-primary-600',\n  className = '',\n  ...props\n}) => {\n  return (\n    <Card className={cn('text-center relative overflow-hidden', className)} {...props}>\n      {/* Subtle gradient background */}\n      <div className=\"absolute inset-0 bg-gradient-to-br from-primary-50/30 to-secondary-50/30 opacity-50\" />\n      <div className=\"relative z-10\">\n        {icon && (\n          <div className=\"text-5xl mb-3 transform hover:scale-110 transition-transform duration-300\">\n            {icon}\n          </div>\n        )}\n        <div className={cn('text-4xl font-bold mb-1 drop-shadow-sm', valueColor)}>\n          {value}\n        </div>\n        <div className=\"text-sm text-gray-600 font-medium\">{label}</div>\n      </div>\n    </Card>\n  );\n};\n\n","/**\n * Badge Service\n * Cáº¥p huy hiá»‡u theo Ä‘iá»ƒm sá»‘ vÃ  Ä‘á»™ chuyÃªn cáº§n\n */\n\nconst BADGES = {\n  FIRST_QUIZ: {\n    id: 'first-quiz',\n    name: 'Báº¯t Ä‘áº§u hÃ nh trÃ¬nh',\n    emoji: 'ðŸŽ¯',\n    description: 'HoÃ n thÃ nh bÃ i quiz Ä‘áº§u tiÃªn',\n    condition: (stats) => stats.totalQuizzes >= 1,\n  },\n  PERFECT_SCORE: {\n    id: 'perfect-score',\n    name: 'HoÃ n háº£o',\n    emoji: 'ðŸ’¯',\n    description: 'Äáº¡t Ä‘iá»ƒm tuyá»‡t Ä‘á»‘i 100/100',\n    condition: (stats) => stats.perfectScores >= 1,\n  },\n  STREAK_3: {\n    id: 'streak-3',\n    name: 'NÃ³ng há»•i',\n    emoji: 'ðŸ”¥',\n    description: 'LÃ m liÃªn tiáº¿p 3 bÃ i quiz',\n    condition: (stats) => stats.currentStreak >= 3,\n  },\n  STREAK_7: {\n    id: 'streak-7',\n    name: 'Báº¥t báº¡i',\n    emoji: 'âš¡',\n    description: 'LÃ m liÃªn tiáº¿p 7 bÃ i quiz',\n    condition: (stats) => stats.currentStreak >= 7,\n  },\n  TOTAL_10: {\n    id: 'total-10',\n    name: 'ChÄƒm chá»‰',\n    emoji: 'ðŸ“š',\n    description: 'HoÃ n thÃ nh 10 bÃ i quiz',\n    condition: (stats) => stats.totalQuizzes >= 10,\n  },\n  TOTAL_50: {\n    id: 'total-50',\n    name: 'SiÃªu sao',\n    emoji: 'â­',\n    description: 'HoÃ n thÃ nh 50 bÃ i quiz',\n    condition: (stats) => stats.totalQuizzes >= 50,\n  },\n  HIGH_SCORE: {\n    id: 'high-score',\n    name: 'ThiÃªn tÃ i',\n    emoji: 'ðŸ§ ',\n    description: 'Äáº¡t Ä‘iá»ƒm cao nháº¥t 90+',\n    condition: (stats) => stats.highestScore >= 90,\n  },\n};\n\n/**\n * TÃ­nh toÃ¡n thá»‘ng kÃª tá»« lá»‹ch sá»­ káº¿t quáº£\n * @param {Array} results - Máº£ng cÃ¡c káº¿t quáº£ quiz\n * @returns {Object} Thá»‘ng kÃª: { totalQuizzes, perfectScores, currentStreak, highestScore, averageScore }\n */\nexport const calculateStats = (results) => {\n  if (!results || results.length === 0) {\n    return {\n      totalQuizzes: 0,\n      perfectScores: 0,\n      currentStreak: 0,\n      highestScore: 0,\n      averageScore: 0,\n    };\n  }\n\n  const sortedResults = [...results].sort((a, b) => b.timestamp - a.timestamp);\n  const totalQuizzes = results.length;\n  const perfectScores = results.filter(r => r.score === 100).length;\n  const highestScore = Math.max(...results.map(r => r.score));\n  const averageScore = Math.round(\n    results.reduce((sum, r) => sum + r.score, 0) / totalQuizzes\n  );\n\n  // TÃ­nh streak (sá»‘ bÃ i liÃªn tiáº¿p gáº§n nháº¥t)\n  let currentStreak = 0;\n  for (const result of sortedResults) {\n    if (result.score >= 50) {\n      currentStreak++;\n    } else {\n      break;\n    }\n  }\n\n  return {\n    totalQuizzes,\n    perfectScores,\n    currentStreak,\n    highestScore,\n    averageScore,\n  };\n};\n\n/**\n * Kiá»ƒm tra vÃ  cáº¥p badge má»›i dá»±a trÃªn thá»‘ng kÃª\n * @param {Array} results - Máº£ng cÃ¡c káº¿t quáº£ quiz\n * @param {Array} earnedBadges - Máº£ng cÃ¡c badge Ä‘Ã£ cÃ³\n * @returns {Array} Máº£ng cÃ¡c badge má»›i Ä‘Æ°á»£c cáº¥p\n */\nexport const checkAndAwardBadges = (results, earnedBadges = []) => {\n  const stats = calculateStats(results);\n  const earnedBadgeIds = earnedBadges.map(b => b.id);\n  const newBadges = [];\n\n  for (const badge of Object.values(BADGES)) {\n    // Bá» qua náº¿u Ä‘Ã£ cÃ³ badge nÃ y\n    if (earnedBadgeIds.includes(badge.id)) continue;\n\n    // Kiá»ƒm tra Ä‘iá»u kiá»‡n\n    if (badge.condition(stats)) {\n      newBadges.push({\n        ...badge,\n        earnedAt: Date.now(),\n      });\n    }\n  }\n\n  return newBadges;\n};\n\n/**\n * Láº¥y táº¥t cáº£ badges\n * @returns {Array} Máº£ng táº¥t cáº£ badges\n */\nexport const getAllBadges = () => {\n  return Object.values(BADGES);\n};\n\n/**\n * Láº¥y badge theo ID\n * @param {string} badgeId - ID cá»§a badge\n * @returns {Object|null} Badge object hoáº·c null\n */\nexport const getBadgeById = (badgeId) => {\n  return BADGES[badgeId] || Object.values(BADGES).find(b => b.id === badgeId) || null;\n};\n\n"],"names":["StatsCard","icon","value","label","valueColor","className","props","jsxs","Card","cn","jsx","BADGES","stats","calculateStats","results","sortedResults","a","b","totalQuizzes","perfectScores","r","highestScore","averageScore","sum","currentStreak","result","checkAndAwardBadges","earnedBadges","earnedBadgeIds","newBadges","badge"],"mappings":"+JAQO,MAAMA,EAAY,CAAC,CACxB,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,WAAAC,EAAa,mBACb,UAAAC,EAAY,GACZ,GAAGC,CACL,IAEIC,EAAAA,KAACC,GAAK,UAAWC,EAAG,uCAAwCJ,CAAS,EAAI,GAAGC,EAE1E,SAAA,CAAAI,EAAAA,IAAC,MAAA,CAAI,UAAU,qFAAA,CAAsF,EACrGH,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACZ,SAAA,CAAAN,GACCS,EAAAA,IAAC,MAAA,CAAI,UAAU,4EACZ,SAAAT,EACH,QAED,MAAA,CAAI,UAAWQ,EAAG,yCAA0CL,CAAU,EACpE,SAAAF,EACH,EACAQ,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAqC,SAAAP,CAAA,CAAM,CAAA,CAAA,CAC5D,CAAA,EACF,EC1BEQ,EAAS,CACb,WAAY,CACV,GAAI,aACJ,KAAM,qBACN,MAAO,KACP,YAAa,+BACb,UAAYC,GAAUA,EAAM,cAAgB,CAChD,EACE,cAAe,CACb,GAAI,gBACJ,KAAM,WACN,MAAO,KACP,YAAa,6BACb,UAAYA,GAAUA,EAAM,eAAiB,CACjD,EACE,SAAU,CACR,GAAI,WACJ,KAAM,WACN,MAAO,KACP,YAAa,2BACb,UAAYA,GAAUA,EAAM,eAAiB,CACjD,EACE,SAAU,CACR,GAAI,WACJ,KAAM,UACN,MAAO,IACP,YAAa,2BACb,UAAYA,GAAUA,EAAM,eAAiB,CACjD,EACE,SAAU,CACR,GAAI,WACJ,KAAM,WACN,MAAO,KACP,YAAa,yBACb,UAAYA,GAAUA,EAAM,cAAgB,EAChD,EACE,SAAU,CACR,GAAI,WACJ,KAAM,WACN,MAAO,IACP,YAAa,yBACb,UAAYA,GAAUA,EAAM,cAAgB,EAChD,EACE,WAAY,CACV,GAAI,aACJ,KAAM,YACN,MAAO,KACP,YAAa,wBACb,UAAYA,GAAUA,EAAM,cAAgB,EAChD,CACA,EAOaC,EAAkBC,GAAY,CACzC,GAAI,CAACA,GAAWA,EAAQ,SAAW,EACjC,MAAO,CACL,aAAc,EACd,cAAe,EACf,cAAe,EACf,aAAc,EACd,aAAc,CACpB,EAGE,MAAMC,EAAgB,CAAC,GAAGD,CAAO,EAAE,KAAK,CAACE,EAAGC,IAAMA,EAAE,UAAYD,EAAE,SAAS,EACrEE,EAAeJ,EAAQ,OACvBK,EAAgBL,EAAQ,OAAOM,GAAKA,EAAE,QAAU,GAAG,EAAE,OACrDC,EAAe,KAAK,IAAI,GAAGP,EAAQ,IAAIM,GAAKA,EAAE,KAAK,CAAC,EACpDE,EAAe,KAAK,MACxBR,EAAQ,OAAO,CAACS,EAAKH,IAAMG,EAAMH,EAAE,MAAO,CAAC,EAAIF,CACnD,EAGE,IAAIM,EAAgB,EACpB,UAAWC,KAAUV,EACnB,GAAIU,EAAO,OAAS,GAClBD,QAEA,OAIJ,MAAO,CACL,aAAAN,EACA,cAAAC,EACA,cAAAK,EACA,aAAAH,EACA,aAAAC,CACJ,CACA,EAQaI,EAAsB,CAACZ,EAASa,EAAe,KAAO,CACjE,MAAMf,EAAQC,EAAeC,CAAO,EAC9Bc,EAAiBD,EAAa,IAAIV,GAAKA,EAAE,EAAE,EAC3CY,EAAY,CAAA,EAElB,UAAWC,KAAS,OAAO,OAAOnB,CAAM,EAElCiB,EAAe,SAASE,EAAM,EAAE,GAGhCA,EAAM,UAAUlB,CAAK,GACvBiB,EAAU,KAAK,CACb,GAAGC,EACH,SAAU,KAAK,IAAG,CAC1B,CAAO,EAIL,OAAOD,CACT"}