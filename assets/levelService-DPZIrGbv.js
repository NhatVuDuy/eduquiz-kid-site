const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index--ILSzZaw.js","assets/react-vendor-labSKdyf.js","assets/animation-vendor-B6fZrcjP.js","assets/ui-vendor-B8QmJS74.js","assets/index-Do1Jb5HZ.css"])))=>i.map(i=>d[i]);
import{c as g,l as w,_ as c}from"./index--ILSzZaw.js";import{getAllLevels as h,getSubjectsForLevel as m}from"./level-DpoHUSSg.js";const L=async()=>h(),p=async r=>m(r),_=async(r={})=>{try{let e=await g();return r.levelId&&(e=e.filter(t=>t.levelId===r.levelId)),r.subjectId&&(e=e.filter(t=>t.subjectId===r.subjectId)),r.quizType&&(e=e.filter(t=>t.quizType===r.quizType)),r.creatorId&&(e=e.filter(t=>t.creatorId===r.creatorId)),e.sort((t,o)=>r.sortBy==="usage"?(o.usageCount||0)-(t.usageCount||0):r.sortBy==="rating"?(o.rating||0)-(t.rating||0):(o.createdAt||0)-(t.createdAt||0)),e}catch(a){return console.error("Error loading quiz list:",a),[]}},v=async r=>{try{const a=await w(r);if(a&&a.questions&&a.questions.length>0)return a;try{const{cloudQuizzes:e}=await c(async()=>{const{cloudQuizzes:o}=await import("./index--ILSzZaw.js").then(s=>s.o);return{cloudQuizzes:o}},__vite__mapDeps([0,1,2,3,4])),t=await e.getQuiz(r);if(t){const{transformQuizMetadata:o,transformQuizQuestions:s}=await c(async()=>{const{transformQuizMetadata:n,transformQuizQuestions:i}=await import("./index--ILSzZaw.js").then(Q=>Q.p);return{transformQuizMetadata:n,transformQuizQuestions:i}},__vite__mapDeps([0,1,2,3,4])),l=o(t),d=Array.isArray(t.questions)?t.questions:t.questions?.results||[],z=s(d,r),u={...l,questions:z,cachedAt:Date.now()},{cacheQuiz:y}=await c(async()=>{const{cacheQuiz:n}=await import("./index--ILSzZaw.js").then(i=>i.n);return{cacheQuiz:n}},__vite__mapDeps([0,1,2,3,4]));return await y(u),u}}catch(e){console.warn("Failed to load quiz from cloud, using cache only:",e)}return null}catch(a){throw console.error("Error loading quiz data:",a),a}},q=async(r,a={})=>{try{const e=await _(a);if(!r||!r.trim())return e;const t=r.toLowerCase();return e.filter(o=>o.title?.toLowerCase().includes(t)||o.description?.toLowerCase().includes(t)||o.creatorName?.toLowerCase().includes(t)||o.tags&&Array.isArray(o.tags)&&o.tags.some(s=>s.toLowerCase().includes(t)))}catch(e){return console.error("Error searching quizzes:",e),[]}};export{p as a,_ as b,v as c,L as l,q as s};
//# sourceMappingURL=levelService-DPZIrGbv.js.map
