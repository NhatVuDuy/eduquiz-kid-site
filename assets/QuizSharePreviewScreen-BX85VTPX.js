import{u as I,j as e,s as g,h as Q,i as L,k as E}from"./index--ILSzZaw.js";import{r as o,m as $}from"./animation-vendor-B6fZrcjP.js";import{B as l}from"./Button-Bl6cuHxx.js";import{C as f}from"./Card-BK5bYxKM.js";import{u as V}from"./quizStore-Chk_mg7S.js";import{c as W}from"./levelService-DPZIrGbv.js";import{getLevelById as D,getQuizTypeMetadata as H}from"./level-DpoHUSSg.js";import{H as y}from"./Header-DyyfoM7s.js";import{S as u}from"./ScreenContainer-21a-fcYA.js";import{I as c}from"./InfoRow-0klGmtIO.js";import"./react-vendor-labSKdyf.js";import"./ui-vendor-B8QmJS74.js";const _=({quizId:b})=>{const{goToNext:d,goBack:j}=I(),{setCurrentLesson:v,setQuestionCount:N,sharedQuizId:C,setSharedQuizId:k}=V(),[t,z]=o.useState(null),[S,h]=o.useState(!0),[p,n]=o.useState(null),r=b||C;o.useEffect(()=>{r&&q(r)},[r]);const q=async s=>{try{h(!0),n(null);const i=await W(s);if(!i){n("KhÃ´ng tÃ¬m tháº¥y bÃ i test nÃ y. CÃ³ thá»ƒ bÃ i test Ä‘Ã£ bá»‹ xÃ³a hoáº·c khÃ´ng tá»“n táº¡i.");return}if(!i.questions||i.questions.length===0){n("BÃ i test nÃ y khÃ´ng cÃ³ cÃ¢u há»i nÃ o.");return}k(i.id||s),z(i)}catch(i){console.error("Error loading quiz:",i),n("CÃ³ lá»—i khi táº£i bÃ i test. Vui lÃ²ng thá»­ láº¡i sau.")}finally{h(!1)}},w=()=>{if(!t)return;g.playClick(),v({id:t.id,name:t.title||t.id,description:t.description||"",icon:"ğŸ“",questions:t.questions});const s=Math.min(10,t.questions.length);N(s),d("questionCount")},m=()=>{g.playClick(),j()};if(S)return e.jsx(u,{maxWidth:"2xl",className:"flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-spin",children:"â³"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Äang táº£i bÃ i test..."})]})});if(p)return e.jsxs(u,{maxWidth:"2xl",children:[e.jsx(y,{title:"KhÃ´ng tÃ¬m tháº¥y bÃ i test",titleClassName:"text-4xl",showBackButton:!0,onBack:()=>d("home")}),e.jsx(f,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("p",{className:"text-xl text-gray-600 mb-4",children:p}),e.jsx(l,{onClick:()=>d("home"),variant:"primary",size:"lg",children:"Vá» trang chá»§"})]})})]});if(!t)return null;const x=t.levelId?D(t.levelId):null,a=t.quizType?H(t.quizType):null,B=async()=>{if(!t)return;const s=t.id||r;if(t.quizType!=="official"&&t.quizType!=="community"){alert("Chá»‰ chia sáº» bÃ i test chÃ­nh thá»©c hoáº·c cá»™ng Ä‘á»“ng.");return}if(await Q(s,t.title))return;if(await L(s))alert("âœ… ÄÃ£ copy link chia sáº» vÃ o clipboard!");else{const T=E(s);prompt("Copy link nÃ y Ä‘á»ƒ chia sáº»:",T)}};return e.jsxs(u,{maxWidth:"2xl",children:[e.jsx(y,{title:"BÃ i test Ä‘Æ°á»£c chia sáº»",subtitle:"Xem thÃ´ng tin trÆ°á»›c khi lÃ m bÃ i",titleClassName:"text-4xl",showBackButton:!0,onBack:m}),e.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(f,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:a?.icon||"ğŸ“"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-3",children:t.title||t.id}),t.description&&e.jsx("p",{className:"text-lg text-gray-600 mb-4 max-w-2xl mx-auto",children:t.description})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[x&&e.jsxs("span",{className:"px-3 py-1.5 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold",children:[x.icon," ",x.name]}),a&&e.jsxs("span",{className:`px-3 py-1.5 bg-gradient-to-r ${a.color} text-white rounded-full text-sm font-semibold`,children:[a.icon," ",a.name]}),t.difficulty&&e.jsx("span",{className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm",children:t.difficulty==="easy"?"ğŸŸ¢ Dá»…":t.difficulty==="medium"?"ğŸŸ¡ Trung bÃ¬nh":"ğŸ”´ KhÃ³"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-primary-50 to-secondary-50 rounded-xl p-6 space-y-4 border border-primary-100",children:[e.jsx(c,{label:"ğŸ“Š Sá»‘ lÆ°á»£ng cÃ¢u há»i:",value:`${t.questions?.length||t.questionCount||0} cÃ¢u`,valueClassName:"text-primary-600 font-bold text-lg"}),t.estimatedTime>0&&e.jsx(c,{label:"â±ï¸ Thá»i gian Æ°á»›c tÃ­nh:",value:`${t.estimatedTime} phÃºt`,valueClassName:"text-gray-700 font-semibold"}),t.usageCount>0&&e.jsx(c,{label:"ğŸ‘¥ Sá»‘ lÆ°á»£t lÃ m:",value:t.usageCount.toLocaleString("vi-VN"),valueClassName:"text-gray-700 font-semibold"}),t.rating>0&&t.ratingCount>0&&e.jsx(c,{label:"â­ ÄÃ¡nh giÃ¡:",value:`${t.rating.toFixed(1)} / 5.0 (${t.ratingCount} Ä‘Ã¡nh giÃ¡)`,valueClassName:"text-yellow-600 font-semibold"}),t.tags&&t.tags.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ğŸ·ï¸ Tags:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map((s,i)=>e.jsx("span",{className:"px-2 py-1 bg-white border border-gray-200 rounded text-xs text-gray-600",children:s},i))})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsx(l,{onClick:w,variant:"primary",size:"lg",className:"flex-1",children:"ğŸš€ Báº¯t Ä‘áº§u lÃ m bÃ i"}),e.jsxs("div",{className:"flex flex-1 gap-2",children:[e.jsx(l,{onClick:B,variant:"outline",size:"lg",className:"flex-1",children:"ğŸ”— Chia sáº»"}),e.jsx(l,{onClick:m,variant:"ghost",size:"lg",className:"flex-1",children:"Há»§y bá»"})]})]})]})})}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(l,{onClick:m,variant:"outline",size:"md",children:"â† Quay láº¡i"})})]})};export{_ as QuizSharePreviewScreen};
//# sourceMappingURL=QuizSharePreviewScreen-BX85VTPX.js.map
